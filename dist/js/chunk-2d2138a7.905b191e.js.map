{"version":3,"sources":["webpack:///./src/components/user/user.vue?99ca","webpack:///src/components/user/user.vue","webpack:///./src/components/user/user.vue?89cc","webpack:///./src/components/user/user.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","on","getUserList","nativeOn","$event","type","indexOf","_k","keyCode","key","model","value","queryInfo","callback","$$v","$set","expression","slot","dialogVisible","staticStyle","userList","scopedSlots","_u","fn","scope","onSwithChange","row","staticClass","showEditDialog","id","removeUserById","showDeployRoles","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addUserCancelDialog","ref","addForm","addFormRules","addUser","editDialogVisible","ediUserCancelDialog","editUserForm","editUser","setRoleDialogVisible","_s","deployUserInfo","username","role_name","select","_l","role","roleName","saveDeployRoles","staticRenderFns","data","checkEmail","regexEmail","test","Error","checkMobile","regexMobile","roleList","query","password","email","mobile","created","methods","newSize","newPage","$refs","addFormRef","resetFields","validate","editUserFormRef","$confirm","component"],"mappings":"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","file":"js/chunk-2d2138a7.905b191e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/welcome' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入内容\"},on:{\"clear\":_vm.getUserList},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getUserList($event)}},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"stripe\":\"\",\"data\":_vm.userList}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.onSwithChange(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"编辑信息\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\",\"prop\":scope},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}})],1),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"删除用户\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row)}}})],1),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"circleu456ho4q5jy90q2456u90\":\"yui90-52\"},on:{\"click\":function($event){return _vm.showDeployRoles(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[2, 5, 10, 20],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.addUserCancelDialog}},[_c('span',[_c('el-form',{ref:\"addFormRef\",attrs:{\"label-width\":\"70px\",\"model\":_vm.addForm,\"rules\":_vm.addFormRules}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.addUserCancelDialog}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.ediUserCancelDialog}},[_c('span',[_c('el-form',{ref:\"editUserFormRef\",attrs:{\"label-width\":\"70px\",\"model\":_vm.editUserForm,\"rules\":_vm.addFormRules}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editUserForm.username),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"username\", $$v)},expression:\"editUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editUserForm.email),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"email\", $$v)},expression:\"editUserForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"mobile\", $$v)},expression:\"editUserForm.mobile\"}})],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.ediUserCancelDialog}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUser}},[_vm._v(\"确 定\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event}}},[_c('div',[_c('p',[_vm._v(\"当前的用户: \"+_vm._s(_vm.deployUserInfo.username))]),_c('p',[_vm._v(\"当前的角色: \"+_vm._s(_vm.deployUserInfo.role_name))]),_c('p',[_vm._v(\" 分配新角色: \"),_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"请选择\"},slot:\"prepend\",model:{value:(_vm.select),callback:function ($$v) {_vm.select=$$v},expression:\"select\"}},_vm._l((_vm.roleList),function(role){return _c('el-option',{key:role.id,attrs:{\"label\":role.roleName,\"value\":role.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveDeployRoles}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"10\">\r\n          <el-input\r\n            clearable\r\n            @keyup.enter.native=\"getUserList\"\r\n            @clear=\"getUserList\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"queryInfo.query\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"getUserList\"\r\n            ></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"dialogVisible = true\"\r\n            >添加用户</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-table border stripe :data=\"userList\" style=\"width: 100%\">\r\n        <el-table-column type=\"index\" label=\"#\"> </el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"> </el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"> </el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\"> </el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\"> </el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.mg_state\"\r\n              @change=\"onSwithChange(scope.row)\"\r\n            >\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"编辑信息\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                size=\"mini\"\r\n                @click=\"showEditDialog(scope.row.id)\"\r\n                type=\"primary\"\r\n                icon=\"el-icon-edit\"\r\n                circle\r\n                :prop=\"scope\"\r\n              >\r\n              </el-button>\r\n            </el-tooltip>\r\n            <!-- 删除按钮 -->\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"删除用户\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                @click=\"removeUserById(scope.row)\"\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                circle\r\n              ></el-button>\r\n            </el-tooltip>\r\n            <!-- 分配角色按钮 -->\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"分配角色\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                size=\"mini\"\r\n                type=\"warning\"\r\n                icon=\"el-icon-setting\"\r\n                circleu456ho4q5jy90q2456u90=\"yui90-52\"\r\n                @click=\"showDeployRoles(scope.row)\"\r\n              ></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页部分开始 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[2, 5, 10, 20]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n      <!-- 分页部分 结束-->\r\n    </el-card>\r\n\r\n    <!-- dialog 开始 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addUserCancelDialog\"\r\n    >\r\n      <!-- 内容主体 -->\r\n      <span>\r\n        <el-form\r\n          label-width=\"70px\"\r\n          :model=\"addForm\"\r\n          ref=\"addFormRef\"\r\n          :rules=\"addFormRules\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input v-model=\"addForm.username\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"密码\" prop=\"password\">\r\n            <el-input v-model=\"addForm.password\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\" prop=\"email\">\r\n            <el-input v-model=\"addForm.email\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"手机\" prop=\"mobile\">\r\n            <el-input v-model=\"addForm.mobile\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </span>\r\n      <!-- 脚步 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addUserCancelDialog\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户信息 dialog 开始 -->\r\n    <el-dialog\r\n      title=\"修改用户信息\"\r\n      :visible.sync=\"editDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"ediUserCancelDialog\"\r\n    >\r\n      <!-- 内容主体 -->\r\n      <span>\r\n        <el-form\r\n          label-width=\"70px\"\r\n          :model=\"editUserForm\"\r\n          ref=\"editUserFormRef\"\r\n          :rules=\"addFormRules\"\r\n        >\r\n          <el-form-item label=\"用户名\" prop=\"username\">\r\n            <el-input v-model=\"editUserForm.username\" disabled> </el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\" prop=\"email\">\r\n            <el-input v-model=\"editUserForm.email\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"手机\" prop=\"mobile\">\r\n            <el-input v-model=\"editUserForm.mobile\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </span>\r\n      <!-- 脚步 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"ediUserCancelDialog\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 修改用户信息 dialog 结束 -->\r\n\r\n    <!-- 分配角色对话框开始 -->\r\n    <el-dialog\r\n      title=\"分配角色\"\r\n      :visible.sync=\"setRoleDialogVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <div>\r\n        <p>当前的用户: {{ deployUserInfo.username }}</p>\r\n        <p>当前的角色: {{ deployUserInfo.role_name }}</p>\r\n        <p>\r\n          分配新角色:\r\n          <el-select v-model=\"select\" slot=\"prepend\" placeholder=\"请选择\">\r\n            <el-option\r\n              :label=\"role.roleName\"\r\n              :value=\"role.id\"\r\n              :key=\"role.id\"\r\n              v-for=\"role in roleList\"\r\n            ></el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveDeployRoles\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 分配角色对话框结束 -->\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    var checkEmail = (rule, value, callback) => {\r\n      const regexEmail = /^\\w+((.\\w+)|(-\\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/\r\n      if (regexEmail.test(value)) return callback()\r\n      callback(new Error('请输入合法邮箱！'))\r\n    }\r\n    var checkMobile = (rule, value, callback) => {\r\n      const regexMobile = /^1[3456789]\\d{9}$/\r\n      if (regexMobile.test(value)) return callback()\r\n      callback(new Error('请输入合法手机号！'))\r\n    }\r\n    return {\r\n      roleList: [],\r\n      select: '',\r\n      deployUserInfo: {},\r\n      // 控制分配角色对话框是否显示\r\n      setRoleDialogVisible: false,\r\n      queryInfo: {\r\n        query: '',\r\n        pagenum: 1,\r\n        pagesize: 10\r\n      },\r\n      userList: [],\r\n      total: 0,\r\n      dialogVisible: false,\r\n      editDialogVisible: false,\r\n      // 表单参数数据绑定\r\n      addForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      editUserForm: {\r\n        id: '',\r\n        username: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      // 表单规则验证对象\r\n      addFormRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 4, max: 11, message: '长度在4 ~ 11 之间', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 6, max: 16, message: '长度在6 ~ 16 之间', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { validator: checkEmail, trigger: 'blur' },\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { validator: checkMobile, trigger: 'blur' },\r\n          { required: true, message: '请输入手机号', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getUserList()\r\n  },\r\n  methods: {\r\n    // 显示分配角色对话框\r\n    async showDeployRoles (user) {\r\n      this.select = ''\r\n      this.deployUserInfo = user\r\n      const { data: result } = await this.$http.get('roles')\r\n      console.log(result)\r\n      if (result.meta.status !== 200) { return this.$message.error('获取角色失败！！') }\r\n      this.roleList = result.data\r\n      this.setRoleDialogVisible = true\r\n    },\r\n    async saveDeployRoles () {\r\n      if (!this.select) return this.$message.info('请选择分配角色！！！')\r\n      const { data: result } = await this.$http.put(\r\n        `users/${this.deployUserInfo.id}/role`,\r\n        {\r\n          rid: this.select\r\n        }\r\n      )\r\n      if (result.meta.status !== 200) return this.$message.error('分配角色失败')\r\n      this.$message.success('分配角色成功')\r\n      this.getUserList()\r\n      this.setRoleDialogVisible = false\r\n    },\r\n    // 监听用户状态改变的方法\r\n    async onSwithChange (userInfo) {\r\n      const { data: result } = await this.$http.put(\r\n        `users/${userInfo.id}/state/${userInfo.mg_state}`\r\n      )\r\n      if (result.meta.status !== 200) {\r\n        userInfo.mg_state = !userInfo.mg_state\r\n        return this.$message.error('更新用户状态失败')\r\n      }\r\n      this.$message.success('更新成功')\r\n    },\r\n    handleSizeChange (newSize) {\r\n      this.queryInfo.pagesize = newSize\r\n      this.getUserList()\r\n    },\r\n    handleCurrentChange (newPage) {\r\n      this.queryInfo.pagenum = newPage\r\n      this.getUserList()\r\n    },\r\n    async getUserList () {\r\n      const { data: res } = await this.$http.get('users', {\r\n        params: this.queryInfo\r\n      })\r\n      console.log(res)\r\n      if (res.meta.status !== 200) return this.$message.error(res.meta.message)\r\n      this.userList = res.data.users\r\n      this.total = res.data.total\r\n    },\r\n    addUserCancelDialog: function () {\r\n      this.dialogVisible = false\r\n      this.$refs.addFormRef.resetFields()\r\n    },\r\n    addUser: function () {\r\n      // this.dialogVisible = false\r\n      this.$refs.addFormRef.validate(async valide => {\r\n        console.log(valide)\r\n        if (!valide) return\r\n        // 发起添加用户的网络请求\r\n        const { data: res } = await this.$http.post('users', this.addForm)\r\n        console.log(res)\r\n        if (res.meta.status !== 201) {\r\n          this.addUserCancelDialog()\r\n          return this.$message.error('添加用户失败！')\r\n        }\r\n        // 关闭dialog\r\n        this.addUserCancelDialog()\r\n        // 重新获取用户列表\r\n        this.getUserList()\r\n        return this.$message.success('添加用户成功！')\r\n      })\r\n    },\r\n    showEditDialog: async function (id) {\r\n      const { data: res } = await this.$http.get('users/' + id)\r\n      if (res.meta.status !== 200) { return this.$message.error('查询用户信息失败！') }\r\n      this.editUserForm = res.data\r\n      this.editDialogVisible = true\r\n    },\r\n    ediUserCancelDialog: function () {\r\n      this.editDialogVisible = false\r\n      this.$refs.editUserFormRef.resetFields()\r\n    },\r\n    editUser: function () {\r\n      this.$refs.editUserFormRef.validate(async valide => {\r\n        console.log(valide)\r\n        if (!valide) return\r\n        console.log(valide)\r\n        // 发起修改用户信息的网络请求\r\n        const { data: res } = await this.$http.put(\r\n          'users/' + this.editUserForm.id,\r\n          { email: this.editUserForm.email, mobile: this.editUserForm.mobile }\r\n        )\r\n\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error('更新用户信息失败！')\r\n        }\r\n        this.editDialogVisible = false\r\n        // 更新用户数据\r\n        this.getUserList()\r\n        return this.$message.success('更新用户信息成功！')\r\n      })\r\n    },\r\n    removeUserById: function (user) {\r\n      this.$confirm(\r\n        `此操作将永久删除用户名为${user.username}的用户, 是否继续?`,\r\n        '提示',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }\r\n      )\r\n        .then(async () => {\r\n          const { data: res } = await this.$http.delete('users/' + user.id)\r\n          if (res.meta.status !== 200) { return this.$message.error('删除用户失败') }\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n          this.getUserList()\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./user.vue?vue&type=template&id=23a81e70&scoped=true&\"\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23a81e70\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}